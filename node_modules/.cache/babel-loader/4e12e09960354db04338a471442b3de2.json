{"ast":null,"code":"import _objectSpread from \"/Users/fanjing/ownproject/didact-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/fanjing/ownproject/didact-react/src/index.js\";\n\nfunction createTextElement(text) {\n  return {\n    type: 'TEXT_ELEMENT',\n    props: {\n      nodeValue: text,\n      children: []\n    }\n  };\n}\n\nfunction createElement(type, props) {\n  for (var _len = arguments.length, children = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    children[_key - 2] = arguments[_key];\n  }\n\n  return {\n    type: type,\n    props: _objectSpread(_objectSpread({}, props), {}, {\n      children: children.map(function (child) {\n        return typeof child === 'object' ? child : createTextElement(child);\n      })\n    })\n  };\n}\n\nfunction render(element, container) {\n  var dom = element.type === 'TEXT_ELEMENT' ? document.createTextNode('') : document.createElement(element.type);\n\n  var isProperty = function isProperty(key) {\n    return key !== 'children';\n  };\n\n  Object.keys(element.props).filter(isProperty).forEach(function (name) {\n    dom[name] = element.props[name];\n  });\n  element.props.children.forEach(function (child) {\n    render(child, dom);\n  });\n  container.appendChild(dom);\n}\n\nvar nextUnitOfWork = null;\n\nfunction workLoop(deadline) {\n  var shouldYield = false;\n\n  while (nextUnitOfWork !== null && !shouldYield) {\n    nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\n    shouldYield = deadline.timeRemaining() < 1;\n  }\n\n  requestIdleCallback(workLoop);\n}\n\nvar Didact = {\n  createElement: createElement,\n  render: render\n};\n/** @jsx Didact.createElement */\n\nvar element = Didact.createElement(\"div\", {\n  id: \"foo\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 3\n  }\n}, Didact.createElement(\"span\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }\n}, \"bar\"), Didact.createElement(\"b\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }\n}));\nvar container = document.getElementById('root');\nDidact.render(element, container);","map":{"version":3,"sources":["/Users/fanjing/ownproject/didact-react/src/index.js"],"names":["createTextElement","text","type","props","nodeValue","children","createElement","map","child","render","element","container","dom","document","createTextNode","isProperty","key","Object","keys","filter","forEach","name","appendChild","nextUnitOfWork","workLoop","deadline","shouldYield","performUnitOfWork","timeRemaining","requestIdleCallback","Didact","getElementById"],"mappings":";;;AAAA,SAASA,iBAAT,CAA2BC,IAA3B,EAAiC;AAC/B,SAAO;AACLC,IAAAA,IAAI,EAAE,cADD;AAELC,IAAAA,KAAK,EAAE;AACLC,MAAAA,SAAS,EAAEH,IADN;AAELI,MAAAA,QAAQ,EAAE;AAFL;AAFF,GAAP;AAOD;;AAED,SAASC,aAAT,CAAuBJ,IAAvB,EAA6BC,KAA7B,EAAiD;AAAA,oCAAVE,QAAU;AAAVA,IAAAA,QAAU;AAAA;;AAC/C,SAAO;AACLH,IAAAA,IAAI,EAAJA,IADK;AAELC,IAAAA,KAAK,kCACAA,KADA;AAEHE,MAAAA,QAAQ,EAAEA,QAAQ,CAACE,GAAT,CAAa,UAACC,KAAD;AAAA,eAAY,OAAOA,KAAP,KAAiB,QAAjB,GAA4BA,KAA5B,GAAoCR,iBAAiB,CAACQ,KAAD,CAAjE;AAAA,OAAb;AAFP;AAFA,GAAP;AAOD;;AAED,SAASC,MAAT,CAAgBC,OAAhB,EAAyBC,SAAzB,EAAoC;AAClC,MAAMC,GAAG,GAAGF,OAAO,CAACR,IAAR,KAAiB,cAAjB,GAAkCW,QAAQ,CAACC,cAAT,CAAwB,EAAxB,CAAlC,GAAgED,QAAQ,CAACP,aAAT,CAAuBI,OAAO,CAACR,IAA/B,CAA5E;;AAEA,MAAMa,UAAU,GAAG,SAAbA,UAAa,CAACC,GAAD;AAAA,WAASA,GAAG,KAAK,UAAjB;AAAA,GAAnB;;AAEAC,EAAAA,MAAM,CAACC,IAAP,CAAYR,OAAO,CAACP,KAApB,EACGgB,MADH,CACUJ,UADV,EAEGK,OAFH,CAEW,UAACC,IAAD,EAAU;AACjBT,IAAAA,GAAG,CAACS,IAAD,CAAH,GAAYX,OAAO,CAACP,KAAR,CAAckB,IAAd,CAAZ;AACD,GAJH;AAMAX,EAAAA,OAAO,CAACP,KAAR,CAAcE,QAAd,CAAuBe,OAAvB,CAA+B,UAACZ,KAAD,EAAW;AACxCC,IAAAA,MAAM,CAACD,KAAD,EAAQI,GAAR,CAAN;AACD,GAFD;AAIAD,EAAAA,SAAS,CAACW,WAAV,CAAsBV,GAAtB;AACD;;AAED,IAAIW,cAAc,GAAG,IAArB;;AAEA,SAASC,QAAT,CAAmBC,QAAnB,EAA6B;AAC3B,MAAIC,WAAW,GAAG,KAAlB;;AAEA,SAAMH,cAAc,KAAK,IAAnB,IAA2B,CAACG,WAAlC,EAA+C;AAC7CH,IAAAA,cAAc,GAAGI,iBAAiB,CAACJ,cAAD,CAAlC;AACAG,IAAAA,WAAW,GAAGD,QAAQ,CAACG,aAAT,KAA2B,CAAzC;AACD;;AAEDC,EAAAA,mBAAmB,CAACL,QAAD,CAAnB;AACD;;AAED,IAAMM,MAAM,GAAG;AACbxB,EAAAA,aAAa,EAAbA,aADa;AAEbG,EAAAA,MAAM,EAANA;AAFa,CAAf;AAKA;;AACA,IAAMC,OAAO,GACX;AAAK,EAAA,EAAE,EAAC,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAFF,CADF;AAOA,IAAMC,SAAS,GAAGE,QAAQ,CAACkB,cAAT,CAAwB,MAAxB,CAAlB;AAEAD,MAAM,CAACrB,MAAP,CAAcC,OAAd,EAAuBC,SAAvB","sourcesContent":["function createTextElement(text) {\n  return {\n    type: 'TEXT_ELEMENT',\n    props: {\n      nodeValue: text,\n      children: [],\n    },\n  };\n}\n\nfunction createElement(type, props, ...children) {\n  return {\n    type,\n    props: {\n      ...props,\n      children: children.map((child) => (typeof child === 'object' ? child : createTextElement(child))),\n    },\n  };\n}\n\nfunction render(element, container) {\n  const dom = element.type === 'TEXT_ELEMENT' ? document.createTextNode('') : document.createElement(element.type);\n\n  const isProperty = (key) => key !== 'children';\n\n  Object.keys(element.props)\n    .filter(isProperty)\n    .forEach((name) => {\n      dom[name] = element.props[name];\n    });\n\n  element.props.children.forEach((child) => {\n    render(child, dom);\n  });\n\n  container.appendChild(dom);\n}\n\nlet nextUnitOfWork = null;\n\nfunction workLoop (deadline) {\n  let shouldYield = false;\n\n  while(nextUnitOfWork !== null && !shouldYield) {\n    nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\n    shouldYield = deadline.timeRemaining() < 1;\n  }\n\n  requestIdleCallback(workLoop);\n}\n\nconst Didact = {\n  createElement,\n  render,\n};\n\n/** @jsx Didact.createElement */\nconst element = (\n  <div id=\"foo\">\n    <span>bar</span>\n    <b />\n  </div>\n)\n\nconst container = document.getElementById('root');\n\nDidact.render(element, container);"]},"metadata":{},"sourceType":"module"}